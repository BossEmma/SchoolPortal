{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/change_password.css' %}">

    <title>Dashboard</title>

</head>
<body>
    {% include "./utils/side-nav.html" %}

    <div id="main">
        {% include "./utils/header.html" %}

        <div id="main2">
            <div class="content">
                <div class="container">
                    <h2>Change Password</h2>
                    <form id="change-password-form">
                        <label for="current-password">Current Password:</label>
                        <input type="password" id="current-password" name="current-password" required>
            
                        <label for="new-password">New Password:</label>
                        <input type="password" id="new-password" name="new-password" required>
                        <small>Password must be at least 8 characters long, contain an uppercase letter, a number, and a special character.</small>
            
                        <label for="confirm-new-password">Confirm New Password:</label>
                        <input type="password" id="confirm-new-password" name="confirm-new-password" required>
            
                   
                        <input type="submit" id="submit" value="Submit"/>
                       
                        <div id="message"></div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <script>
        document.getElementById('change-password-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const currentPassword = document.getElementById('current-password').value;
        const newPassword = document.getElementById('new-password').value;
        const confirmNewPassword = document.getElementById('confirm-new-password').value;
        const message = document.getElementById('message');

        // Password validation logic
        if (newPassword.length < 8 || !/[A-Z]/.test(newPassword) || !/[0-9]/.test(newPassword) || !/[!@#$%^&*]/.test(newPassword)) {
            message.textContent = "New password does not meet the requirements.";
            message.style.color = "red";
            return;
        }

        if (newPassword !== confirmNewPassword) {
            message.textContent = "New passwords do not match.";
            message.style.color = "red";
            return;
        }

            // Simulate a successful password change
            message.textContent = "Password successfully changed!";
            message.style.color = "green";
        });

        document.getElementById('cancel').addEventListener('click', function() {
            window.location.href = '/'; // Redirect to home or previous page
        });

    </script>
</body>
</html>